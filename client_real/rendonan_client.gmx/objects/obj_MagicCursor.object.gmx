<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>rotation=0;
if !instance_exists(obj_SkillRune1) {instance_create(x,y,obj_SkillRune1)};

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>Trigger Skill</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>    
if global.usemagic &gt;= 0
{
    if mouse_check_button_pressed(mb_left)
    {
        if global.usemagic=0
        {   
            /***************************************************
              SEND THIS DATA OVER VIA THE MOVEMENT SERVER :D
             ***************************************************/
            var xpos, ypos, xx, yy, a;
            xx=mouse_x;
            yy=mouse_y;
            xpos = xx-200+round(random(400));
            ypos = yy-400-round(random(300));
            a=instance_create(xpos,ypos,obj_Meteor);
            a.xx=xx;
            a.yy=yy;
            a.xpos=xpos;
            a.ypos=ypos;           
            with (obj_Multiplayer)
            {
                // send position and speed
                buffer_clear(global.buffer);
                buffer_write_uint8(global.buffer, 30); //30 as magic skill id 0
                //STEP EVENT OF PLAYER SENDING STREAM OF DATA
                buffer_write_float32(global.buffer, xx);
                buffer_write_float32(global.buffer, yy);
                buffer_write_float32(global.buffer, xpos);
                buffer_write_float32(global.buffer, ypos);
                //show_message("sent meteor data");
                socket_write_message(socket, global.buffer);
                //show_message("Sent Meteor:#xx: "+string(xx)+string("#yy: ")+string(yy)+string("#xpos: ")+string(xpos)+string("#ypos: ")+string(ypos));
            }
            
        }
        else if global.usemagic=1
        {
            var xpos, ypos, xx, yy, a;
            xx=mouse_x;
            yy=mouse_y;
            xpos = xx - 200 + round(random(400));
            ypos = yy - 400 - round(random(000));
            a = instance_create(xpos,ypos,obj_GaleM1);
            a.xx = xx;
            a.yy = yy;
            a.xpos = xpos;
            a.ypos = ypos;     
            a.caster="self";       
            with (obj_Multiplayer)
            {
                // send position and speed
                buffer_clear(global.buffer);
                buffer_write_uint8(global.buffer, 31); //30 as magic skill id 0
                //STEP EVENT OF PLAYER SENDING STREAM OF DATA
                buffer_write_float32(global.buffer, xx);
                buffer_write_float32(global.buffer, yy);
                buffer_write_float32(global.buffer, xpos);
                buffer_write_float32(global.buffer, ypos);
                socket_write_message(socket, global.buffer);
            }
            
        }
        else if global.usemagic=2
        {
            var xx, yy, a;
            xx=mouse_x;
            yy=mouse_y;
            a = instance_create(xx,yy,obj_IceBlaze);
            
            with (obj_Multiplayer)
            {
                // send position and speed
                buffer_clear(global.buffer);
                
                //BUGFINDING SUCCESFULL --------&gt; uint8 sending 32 apparently is received wrongly? anything above 31 is received as.. sunflash (36) 
                buffer_write_uint8(global.buffer, 32); //30 as magic skill id 0
                //STEP EVENT OF PLAYER SENDING STREAM OF DATA
                buffer_write_float32(global.buffer, xx);
                buffer_write_float32(global.buffer, yy);
                socket_write_message(socket, global.buffer);
            }
            
        }
        else if global.usemagic=3
        {
            var xx, yy, a;
            xx=mouse_x;
            yy=mouse_y;
            a = instance_create(xx,yy,obj_EarthSpikes);
            
            with (obj_Multiplayer)
            {
                // send position and speed
                buffer_clear(global.buffer);
                buffer_write_uint8(global.buffer, 33); //30 as magic skill id 0
                //STEP EVENT OF PLAYER SENDING STREAM OF DATA
                buffer_write_float32(global.buffer, xx);
                buffer_write_float32(global.buffer, yy);
                socket_write_message(socket, global.buffer);
            }
            
        }
        else if global.usemagic=4
        {
            var xx, yy, a;
            xx=mouse_x;
            yy=mouse_y;
            a = instance_create(xx,yy,obj_GhastlyFence);
            a.time=300;
            
            with (obj_Multiplayer)
            {
                // send position and speed
                buffer_clear(global.buffer);
                buffer_write_uint8(global.buffer, 34); //30 as magic skill id 0
                //STEP EVENT OF PLAYER SENDING STREAM OF DATA
                buffer_write_float32(global.buffer, xx);
                buffer_write_float32(global.buffer, yy);
                socket_write_message(socket, global.buffer);
            }
            
        }
        else if global.usemagic=5
        {
            var xx,yy,a;
            xx=mouse_x;
            yy=mouse_y;
            a = instance_create(xx,yy,obj_Inferno);
            a.radius=200;
            a.xx = xx
            a.yy = yy
            a.time=200;
            
            with (obj_Multiplayer)
            {
                // send position and speed
                buffer_clear(global.buffer);
                buffer_write_uint8(global.buffer, 35); //30 as magic skill id 0
                //STEP EVENT OF PLAYER SENDING STREAM OF DATA
                buffer_write_float32(global.buffer, xx);
                buffer_write_float32(global.buffer, yy);
                socket_write_message(socket, global.buffer);
            }
            
        }
        else if global.usemagic=6
        {
            var xx,yy,a;
            xx=mouse_x;
            yy=mouse_y;
            a = instance_create(xx,yy,obj_Sunflash);
            a.radius=200;
            a.xx = xx
            a.yy = yy
            a.time=90;
            
            with (obj_Multiplayer)
            {
                // send position and speed
                buffer_clear(global.buffer);
                buffer_write_uint8(global.buffer, 36); //30 as magic skill id 0
                //STEP EVENT OF PLAYER SENDING STREAM OF DATA
                buffer_write_float32(global.buffer, xx);
                buffer_write_float32(global.buffer, yy);
                socket_write_message(socket, global.buffer);
            }
            
        }
        global.usemagic=-1
    }
}

if global.usemagic=-1 {instance_destroy();}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>x=mouse_x;
y=mouse_y;

rotation+=1;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>obj_Controller.ownsp += skillcost[global.usemagic];
global.usemagic=-1;
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Gonna depent per usemagic
if global.usemagic&gt;=0
{
draw_set_color(c_black);
draw_set_alpha(1);
scr_SkillList();
//draw area following cursor
draw_circle(mouse_x,mouse_y,skillrange[global.usemagic+1],1);

draw_sprite_ext(spr_MagicCursor,2,mouse_x,mouse_y,0.1+0.024*skillrange[global.usemagic+1],0.1+0.024*skillrange[global.usemagic+1],-2*rotation,c_white,0.7);
draw_sprite_ext(spr_MagicCursor,3,mouse_x,mouse_y,0.1+0.024*skillrange[global.usemagic+1],0.1+0.024*skillrange[global.usemagic+1],0.5*rotation,c_white,0.3);
draw_sprite_ext(spr_MagicCursor,0,mouse_x,mouse_y,0.1+0.024*skillrange[global.usemagic+1],0.1+0.024*skillrange[global.usemagic+1],-rotation,c_white,1);
draw_sprite_ext(spr_MagicCursor,1,mouse_x,mouse_y,0.1+0.024*skillrange[global.usemagic+1],0.1+0.024*skillrange[global.usemagic+1],rotation,c_white,1);


//draw_sprite_ext(spr_MagicCursor,0,mouse_x,mouse_y,1,1,-rotation,c_white,1);
//draw_sprite_ext(spr_MagicCursor,1,mouse_x,mouse_y,1,1,rotation,c_white,1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
