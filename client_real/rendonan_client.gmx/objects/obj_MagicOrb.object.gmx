<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_MagicOrb</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>2</depth>
  <persistent>0</persistent>
  <parentName>parent_monster</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

/***************************************************
  ################ Monster Data ####################
 ***************************************************/

name                ="Magic Orb";
level               =14;
hp                  =168;
defence             =30;
droprate            =0; //in percent
ExperienceContent   =1+floor(random(1))
movespeed           =2;
attack              =16;
attackdelay         =2;     //attackspeed (start from timer2, towards attackdelay ++)
shot                =0;     //shot=0{passive, can be sucked in by boss} shot=1{being shot at player, hit on impact}
stopmove            =15;

updatecolor         =0;


SS_PlaySound(global.fx_Spawn);

//Other Values
hit=0;              //if taking damage
inrange=false;      //if inrange of player
movement=0;         //timer when to re-select x-y positions
hptotal=hp;         //Define Total hp
hppercent=(hp/hptotal)*100//Define hp percentage
//timer=0;
//number=1;
//created=0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_ParticleBoss1();
part_system_depth(p3emitter1,6);


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>part_type_destroy(p3emitter1);
part_emitter_destroy(Particlescript3,p3emitter1);
part_system_destroy(p3emitter1);


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(obj_Boss1)
{
    if (obj_Boss1.state==1 || obj_Boss1.state==3)
    {
        if stopmove &gt;0 {stopmove-=1}
        if stopmove&lt;=0 {stopmove=15; hspeed=0; vspeed=0;}
    }
}
else
{
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>hppercent=(hp/hptotal)*100

//Getting hit by player
if instance_exists(obj_tdPlayer)
    {
    if point_distance(x,y,obj_tdPlayer.x,obj_tdPlayer.y) &lt; obj_tdPlayer.attackrange         //if in player's attackrange
        {
            inrange=true;
            if obj_tdPlayer.hitting=1
            {
                monsterattack(0,0);
                //hit = (1/defence)*round(((0.6+random(0.4))*obj_Controller.ownstrength)^(1+0.05*obj_Controller.weapondamage))
                hp -= hit                                                                     //Taking Damage when Hit; Change to Player's damage with formula!  &lt;---------------
                create=instance_create(x+random(10)-random(10),y-15,obj_MagicOrbHit)
                create.hurt = hit                                                              //Variable to set for damagetaker
                move_towards_point(obj_tdPlayer.x,obj_tdPlayer.y,-25)
                instance_create(x,y,obj_HitFX);
            }                                                                     
        
            //}

        }
                    else
            {
                inrange=false;
            }
    }
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Death Script

if hp &lt;= 0
{
    SS_PlaySound(global.fx_Splash);
    part_type_destroy(p3emitter1);
    part_emitter_destroy(Particlescript3,p3emitter1);
    part_system_destroy(p3emitter1);
    instance_destroy();
    part_type_destroy(p3emitter1);
    part_emitter_destroy(Particlescript3,p3emitter1);
    part_system_destroy(p3emitter1);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//hit by skill
if distance_to_object(obj_ActionImpale) &lt;= 15
{
    monsterattack(0,1);
    //hit = (1/defence)*round(((0.6+random(0.4))*1*obj_Controller.ownstrength)^(1+0.05*obj_Controller.weapondamage))
    hp -= hit                                                                     //Taking Damage when Hit; Change to Player's damage with formula!  &lt;---------------
    create=instance_create(x+random(10)-random(10),y-15,obj_MagicOrbHit)
    create.hurt = hit                                                              //Variable to set for damagetaker
    move_towards_point(obj_ActionImpale.x,obj_ActionImpale.y,-25)
    instance_create(x,y,obj_HitFX);
}


//GroundShock
if distance_to_object(obj_ActionGroundshock) &lt;= 15
{
    monsterattack(0,2);
    //hit = 2+(1/defence)*round(((0.6+random(0.4))*0.5*obj_Controller.ownstrength)^(1+0.05*obj_Controller.weapondamage))
    hp -= hit                                                                     //Taking Damage when Hit; Change to Player's damage with formula!  &lt;---------------
    create=instance_create(x+random(10)-random(10),y-15,obj_MagicOrbHit)
    create.hurt = hit                                                              //Variable to set for damagetaker
    move_towards_point(obj_ActionGroundshock.x,obj_ActionGroundshock.y,-25)
    instance_create(x,y,obj_HitFX);
}

//Energy Blast
if distance_to_object(obj_ActionEnergyBlast) &lt;=300
{
    if obj_ActionEnergyBlast.hitting=1
    {
        monsterattack(0,3);
        hp-=hit
        create=instance_create(x+random(10)-random(10),y-15,obj_MagicOrbHit)
        create.hurt = hit                                                              //Variable to set for damagetaker
        move_towards_point(obj_ActionEnergyBlast.x,obj_ActionEnergyBlast.y,-35)
        instance_create(x,y,obj_HitFX);
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(obj_Boss1)
{
    
    //boss states response by orbs
    if obj_Boss1.state=2
    {
        move_towards_point(obj_Boss1.x,obj_Boss1.y,3)
    }
    else if obj_Boss1.state=4
    {
        if shot=0
        {
            move_towards_point(obj_Boss1.x,obj_Boss1.y,6)
        }
    }

}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>part_emitter_region(Particlescript3,p3emitter1,x-5,x+5,y-5,y+5,0,0);

/*
if instance_exists(obj_Boss1)
{
    if updatecolor=1
    {
        instance_destroy();
        instance_create(x,y,obj_MagicOrb);
        updatecolor=0;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_Boss1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if obj_Boss1.state=2
{
    obj_Boss1.hp+=15;
    SS_PlaySound(global.fx_Potion);
    instance_destroy();
}

else if obj_Boss1.state=4
{
    if instance_exists(obj_tdPlayer)
    {
        shot=1;
        move_towards_point(obj_tdPlayer.x,obj_tdPlayer.y,10)
        SS_PlaySound(global.fx_Peew1);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_tdPlayer">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if shot=1
{
    monsterattack(1,0);
    //saypc(name +string(" hit you. You lost ") +string(round(attack^-(0.01*obj_Controller.defence))) +string("hp."),c_red);
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>part_type_destroy(p3emitter1);
part_emitter_destroy(Particlescript3,p3emitter1);
part_system_destroy(p3emitter1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(sprite_index,image_index,x,y,1,1,direction,c_white,1);


draw_set_halign(fa_center);
draw_set_alpha(0.6)

//draw black name background tag
draw_set_color(c_black)
draw_roundrect(x-2-0.5*string_width(name +string(" Lv") +string(level)),y-34,x+2+0.5*string_width(name +string(" Lv")+string(level)),y-25,0)

draw_set_alpha(1)
//Picking Text color depending on the players' and mobs' lvl
if obj_Controller.ownlevel - level &gt;= 2
{draw_set_color(c_white)}
else if obj_Controller.ownlevel - level &lt;= 1 &amp;&amp; obj_Controller.ownlevel - level &gt;= -1
{draw_set_color(c_lime)}
else if obj_Controller.ownlevel - level &lt;= -2 &amp;&amp; obj_Controller.ownlevel - level &gt;= -3
{draw_set_color(c_orange)}
else if obj_Controller.ownlevel - level &lt;= -4 &amp;&amp; obj_Controller.ownlevel - level &gt;= -5
{draw_set_color(c_red)}
else if obj_Controller.ownlevel - level &lt;= -6
{draw_set_color(c_fuchsia)}




draw_set_font(ft_Monster);
draw_text(x,y-36,name +string(" Lv") +string(level));
draw_healthbar(x,y-23,x+40,y-19,hppercent,c_black,c_red,c_green,0,1,0);
draw_healthbar(x,y-23,x-40,y-19,hppercent,c_black,c_red,c_green,0,1,0);

if (inrange)
{
    draw_sprite_ext(spr_Bradar1,0,x,y,1,1,0,c_white,0.5)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
